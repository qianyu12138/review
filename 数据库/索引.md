### 索引 

数据库索引是独立于数据的用于排序的数据结构，通常使用BTree或B+TREE实现，索引以某种方式指向数据，可实现高级查找算法。

协助快速查询、更新表中数据

代价：空间，插入修改的额外时间

 B+ 树的阶数就是一个节点存储的键的数量，MySQL默认一个节点的存储容量为一个MySQL页（默认16KB）的大小，其中叶子节点存储了数据（也就是一行记录的内容），占用的空间比较大，16KB存不了几行。

这里我们`先假设B+树高为2`，即存在一个根节点和若干个叶子节点，那么这棵B+树的存放总记录数为：根节点指针数*单个叶子节点记录行数。

上文我们已经说明单个叶子节点（页）中的记录数=16K/1K=16。（这里假设一行记录的数据大小为1k，`实际上`现在很多互联网业务`数据记录大小通常就是1K左右`）。

那么现在我们需要计算出`非叶子节点能存放多少指针`，其实这也很好算，我们假设`主键ID为bigint类型，长度为8字节`，而`指针大小`在InnoDB源码中设置为`6字节`，这样一共14字节，我们一个页中能存放多少这样的单元，其实就代表有多少指针，即`16384/14=1170`。那么可以算出一棵`高度为2的B+树`，能存放`1170*16=18720条`这样的数据记录。

根据同样的原理我们可以算出一个`高度为3的B+树`可以存放：`1170*1170*16=21902400条`这样的记录。所以在InnoDB中`B+树高度一般为1-3层`，它就能`满足千万级的数据存储`。在查找数据时 **`一次页的查找代表一次IO`**， 所以通过主键索引查询通常 **`只需要1-3次IO操作`** 即可查找到数据。

优点：

1. 通过创建唯一性索引，保证表中数据的唯一性

2. 加快数据的检索速度（主要原因）

3. 加速表与表之间的连接

4. 减少查询中分组和排序的时间

5. 在查询的过程中，使用优化隐藏器，提高系统性能

缺点：

1. 增加索引维护的时间开销，这种开销随数据量的增加而增加
2. 占用物理空间

为什么不用B树？

因为B树不管叶子节点还是非叶子节点，都会保存数据，这样导致在非叶子节点中能保存的指针数量变少（有些资料也称为扇出），指针少的情况下要保存大量数据，只能增加树的高度，导致IO操作变多，查询性能变低；